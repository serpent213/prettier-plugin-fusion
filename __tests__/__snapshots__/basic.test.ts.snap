// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`Fusion > AssetList 1`] = `
"prototype(Two13Tec.Senegal:Presentation.AssetList.Icon) < prototype(Neos.Fusion:Component) {
  mediaType = ""
  filename = ""

  @private {
    normalizedMediaType = \${String.toLowerCase(props.mediaType || '')}
    normalizedFilename = \${String.toLowerCase(props.filename || '')}

    icon = Neos.Fusion:Case {
      pdf {
        condition = \${
          Strange.superMamba(
            private.normalizedMediaType,
            'pdf',
            private.normalizedMediaType,
            'pdf',
            private.normalizedMediaType,
            'pdf'
          ) >= 0
            || String.endsWith(private.normalizedFilename, '.pdf')
        }
        renderer = "icon-[fa7-solid--file-pdf]"
      }

      word {
        condition = \${String.indexOf(private.normalizedMediaType, 'word') >= 0
                        || String.endsWith(private.normalizedFilename, '.doc')
                        || String.endsWith(private.normalizedFilename, '.docx')}
        renderer = "icon-[fa7-solid--file-word]"
      }

      excel {
        condition = \${String.indexOf(private.normalizedMediaType, 'excel') >= 0
                        || String.indexOf(private.normalizedMediaType, 'spreadsheet') >= 0
                        || String.endsWith(private.normalizedFilename, '.xls')
                        || String.endsWith(private.normalizedFilename, '.xlsx')}
        renderer = "icon-[fa7-solid--file-excel]"
      }

      powerpoint {
        condition = \${String.indexOf(private.normalizedMediaType, 'powerpoint') >= 0
                        || String.indexOf(private.normalizedMediaType, 'presentation') >= 0
                        || String.endsWith(private.normalizedFilename, '.ppt')
                        || String.endsWith(private.normalizedFilename, '.pptx')}
        renderer = "icon-[fa7-solid--file-powerpoint]"
      }

      image {
        condition = \${String.startsWith(private.normalizedMediaType, 'image/')}
        renderer = "icon-[fa7-solid--file-image]"
      }

      video {
        condition = \${String.startsWith(private.normalizedMediaType, 'video/')}
        renderer = "icon-[fa7-solid--file-video]"
      }

      audio {
        condition = \${String.startsWith(private.normalizedMediaType, 'audio/')}
        renderer = "icon-[fa7-solid--file-audio]"
      }

      archive {
        condition = \${String.indexOf(private.normalizedMediaType, 'zip') >= 0
                        || String.indexOf(private.normalizedMediaType, 'compressed') >= 0
                        || String.endsWith(private.normalizedFilename, '.zip')
                        || String.endsWith(private.normalizedFilename, '.rar')
                        || String.endsWith(private.normalizedFilename, '.gz')
                        || String.endsWith(private.normalizedFilename, '.tar')}
        renderer = "icon-[fa7-solid--file-zipper]"
      }

      code {
        condition = \${String.indexOf(private.normalizedMediaType, 'json') >= 0
                        || String.indexOf(private.normalizedMediaType, 'xml') >= 0
                        || String.indexOf(private.normalizedMediaType, 'javascript') >= 0
                        || String.indexOf(private.normalizedMediaType, 'html') >= 0
                        || String.endsWith(private.normalizedFilename, '.json')
                        || String.endsWith(private.normalizedFilename, '.xml')
                        || String.endsWith(private.normalizedFilename, '.js')
                        || String.endsWith(private.normalizedFilename, '.html')}
        renderer = "icon-[fa7-solid--file-code]"
      }

      default {
        condition = true
        renderer = "icon-[fa7-solid--file-lines]"
      }
    }
  }

  renderer = afx\`<span class={'py-[1.125rem] ' + private.icon} aria-hidden="true"></span>\`
}

prototype(Two13Tec.Senegal:Presentation.AssetList.Item) < prototype(Neos.Fusion:Component) {
  asset = null

  @private {
    resource = \${props.asset ? props.asset.resource : null}
    mediaType = \${private.resource ? private.resource.mediaType : ''}
    filename = \${private.resource ? private.resource.filename : ''}
    hasResource = \${private.resource ? true : false}
    displayName = \${props.asset && props.asset.title ? props.asset.title : (private.filename || '')}
    caption = \${props.asset && props.asset.caption || ''}
  }

  renderer = afx\`
    <li class="border-b border-separator/30 last:border-b-0">
      <Neos.Fusion:Link.Resource
        @if.hasResource={private.hasResource}
        href.resource={private.resource}
        class="flex items-start gap-4 py-2 -mx-2 px-2 rounded-md hover:bg-hover-background/30 transition-colors"
      >
        <div class="w-6 text-2xl text-primary-600" aria-hidden="true">
          <Two13Tec.Senegal:Presentation.AssetList.Icon mediaType={private.mediaType} filename={private.filename} />
        </div>
        <div class="flex flex-col gap-1">
          <span class="font-semibold"> {private.displayName} </span>
          <span @if.hasMeta={private.caption} class="text-sm text-neutral-500"> {private.caption} </span>
        </div>
      </Neos.Fusion:Link.Resource>
      <div @if.noResource={!private.hasResource} class="flex items-start gap-4 py-2">
        <div class="text-xl text-primary-600" aria-hidden="true">
          <Two13Tec.Senegal:Presentation.AssetList.Icon mediaType={private.mediaType} filename={private.filename} />
        </div>
        <div class="flex flex-col gap-1">
          <span class="font-semibold"> {private.displayName} </span>
          <span @if.hasMeta={private.caption} class="text-sm text-neutral-500"> {private.caption} </span>
        </div>
      </div>
    </li>
  \`
}

prototype(Two13Tec.Senegal:Presentation.AssetList) < prototype(Neos.Fusion:Component) {
  assets = null
  attributes = Neos.Fusion:DataStructure

  renderer = afx\`
    <ul {...props.attributes}>
      <li class="text-sm text-neutral-500" @if.showPlaceholder={!props.assets && renderingMode.isEdit}>
        {Translation.id('content.emptyAssetList').package('Neos.NodeTypes.AssetList').source('NodeTypes/AssetList')}
      </li>
      <Neos.Fusion:Loop items={props.assets} itemName="asset">
        <Two13Tec.Senegal:Presentation.AssetList.Item asset={asset} />
      </Neos.Fusion:Loop>
    </ul>
  \`
}

// TODO: Review - should that live here?
prototype(Neos.NodeTypes.AssetList:AssetList) {
  assets = \${q(node).property('assets')}

  attributes = Neos.Fusion:DataStructure
  attributes.class = "content-asset-list list-none p-0 m-0"
  attributes.class.@process.nodeType = \${
    Array.push(value, String.toLowerCase(String.pregReplace(node.nodeTypeName, '/[[:^alnum:]]/', '-')))
  }
  @if.render = \${this.assets || renderingMode.isEdit}

  renderer >
  renderer = Neos.Fusion:Case {
    wrapped {
      condition = \${!context.inContainer}
      renderer = afx\`
        <section class="content-shell content-surface content-padded">
          <div class="content-inner">
            <Two13Tec.Senegal:Presentation.AssetList assets={props.assets} attributes={props.attributes} />
          </div>
        </section>
      \`
    }

    atest {
      condition = false
      renderer = afx\`<Two13Tec.Senegal:Presentation.AssetList assets={props.assets} attributes={props.attributes} />\`
    }

    btest {
      condition = false
      renderer = afx\`<Two13Tec.Senegal:Presentation.AssetList assets={props.assets} attributes={props.attributes} />\`
    }

    default {
      condition = true
      renderer = afx\`
        <Two13Tec.Senegal:Presentation.AssetList assets={props.assets} attributes={props.attributes} />
      \`
    }
  }
}
"
`;

exports[`Fusion > Card 1`] = `
"prototype(Neos.Demo:Presentation.Cards.Card) < prototype(Neos.Fusion:Component) {
  // This is used for the living styleguide (Monocle)
  // Read more about this in the README.md
  @styleguide {
    props {
      uri = "https://example.com"
      title = "Card title"
      content = "Some quick example text to build on the card title and make up the bulk of the card's content."
      date = ""
      authorName = ""
      imageUri = ""
      class = ""
    }
  }

  uri = null
  imageUri = null
  title = null
  content = null
  date = null
  authorName = null

  class = null

  renderer = afx\`
    <div class={"block shadow-lg bg-white" + props.class}>
      <a href={props.uri}>
        <img
          class="w-full"
          src={props.imageUri || StaticResource.uri('Neos.Neos', 'Public/Images/dummy-image.svg')}
          alt=""
        />
      </a>

      <div class="mt-5 ml-8 italic text-sm">
        <time datetime={Date.format(props.date, 'Y-m-d')} @if={props.date}>
          {Date.formatCldr(props.date, 'd. MMMM y')}
        </time>
      </div>
      <div class="p-8 pt-3">
        <h2 class="mb-2 text-xl font-medium leading-tight">{props.title}</h2>
        <p class="mb-4 text-base">{props.content}</p>
        <p class="pb-3 italic text-sm" @if={props.authorName}>
          {I18n.translate('cards.authorPublishedBy', 'Published by {authorName}', { authorName: props.authorName }, 'Presentation.Cards:cards', 'Neos.Demo')}
        </p>
        <a
          href={props.uri}
          class="inline-block bg-light px-6 pt-2.5 pb-2 text-xs font-medium uppercase leading-normal text-white shadow-md hover:bg-light focus:bg-light active:bg-light"
        >
          {I18n.translate('Neos.Demo:Presentation.Cards:cards.moreButton')}
        </a>
      </div>
    </div>
  \`
}
"
`;

exports[`Fusion > Comments 1`] = `
"prototype(Vendor.Site:Blog.CardList) < prototype(Neos.Fusion:Component) {
  # Photo article
  photoArticle = "photo"

  // Link article - show link info
  linkArticle {
    renderer = "link"
  }

  /* Circular mode (default) - use traditional properties */
  circular {
    condition = true
  }

  renderer = afx\`
    <!-- Template hint -->
    <div>{props.title}</div>
  \`
}
"
`;

exports[`Fusion > IncludesAndCopies 1`] = `
"prototype(Vendor.Site:Content.Teaser) < prototype(Neos.Neos:ContentComponent) {
  @cache.mode = "uncached"

  renderer = Neos.Fusion:Case {
    primary {
      condition = \${q(node).is('[instanceof Vendor.Site:Document.Article]')}
      renderer = afx\`
        <div class="teaser" @if={props.items}>
          <Neos.Fusion:Loop items={props.items}>
            <li>{item}</li>
          </Neos.Fusion:Loop>
        </div>
      \`
    }

    fallback {
      renderer < Neos.Fusion:Component
    }
  }

  @process.trim = Neos.Fusion:Trim {
    value = \${String.trim(value)}
  }

  @process.uppercase = Vendor.Site:Process.Uppercase {
  }
}

Vendor.Site:Data.Feed {
  @cache.entryIdentifier = "feed-cache"
  @apply.props = \${props}
  headline = "Latest News"
  items < prototype(Vendor.Site:Data.ItemCollection)
  teaserVariant >
}
"
`;

exports[`Fusion > Registration 1`] = `
"##
# "Registration" element based on Fusion.Form
#
prototype(Neos.Demo:Content.Registration) < prototype(Neos.Neos:ContentComponent) {
  renderer = Neos.Fusion.Form:Runtime.RuntimeForm {
    namespace = "neos-demo-registration"

    attributes {
      id = \${'form-' + node.aggregateId}
      action = \${'#' + this.id}
    }

    form.method = "POST"

    process {
      content = afx\`
        <fieldset class="space-y-6 mb-8 max-w-[300px] [&_label]:sr-only">
          <Neos.Fusion.Form:FieldContainer field.name="username" label="Username">
            <Neos.Fusion.Form:Input
              attributes.required={true}
              attributes.placeholder="Username"
              attributes.pattern="[a-z0-9]+"
            />
            <small>(lowercase letters and numbers only)</small>
          </Neos.Fusion.Form:FieldContainer>
          <Neos.Fusion.Form:FieldContainer field.name="password" label="Password">
            <Neos.Fusion.Form:Password attributes.required={true} attributes.placeholder="Password" />
          </Neos.Fusion.Form:FieldContainer>
        </fieldset>
      \`

      schema {
        username = \${
          Form.Schema.string().isRequired().validator('Neos\\Demo\\Form\\Runtime\\Validation\\Validator\\UsernameInUseValidator')
        }
        password = \${Form.Schema.string().isRequired()}
      }
    }

    action {
      createBackendUser {
        type = "Neos.Demo.Form.Runtime:CreateUser"

        options {
          username = \${data.username}
          password = \${data.password}
          // you can configure an array of Backend Roles to be added to this user
          roles = \${['Neos.Neos:Editor']}
          // this is basically for security reasons if someone
          // forgets to remove this functionality
          // you can configure a valid DateTime constructor format here
          expiry = "+1 week"
        }

        @position = "start"
      }

      redirect {
        type = "Neos.Fusion.Form.Runtime:Redirect"

        options.uri = Neos.Fusion:UriBuilder {
          package = "Neos.Neos"
          controller = "Login"
          action = "index"

          additionalParams {
            username = \${data.username}
          }
        }

        @position = "end"
      }
    }
  }
}
"
`;

exports[`Fusion > Slider 1`] = `
"prototype(Neos.Demo:Presentation.Slider) < prototype(Neos.Fusion:Component) {
  // This is used for the living styleguide (Monocle)
  // Read more about this in the README.md
  @styleguide.props.items = Neos.Fusion:Map {
    items = \${Array.range(1, 10)}
    itemRenderer = afx\`
      <img class="w-full" src={"https://picsum.photos/800/400?random=" + item} alt="placeholder image" />
    \`
  }

  tagName = "section"
  sliderIsDecoration = false
  class = null
  slideItemClass = "flex flex-col items-center justify-center"

  options = Neos.Fusion:DataStructure {
    # The gap between slides. The CSS format is acceptable, such as 1em.
    gap = 12
  }

  attributes = Neos.Fusion:DataStructure

  i18n = Neos.Fusion:Map {
    items = \${
      ['prev', 'next', 'first', 'last', 'slideX', 'pageX', 'play', 'pause', 'carousel', 'select', 'slide', 'slideLabel', 'playVideo']
    }
    keyRenderer = \${item}
    itemRenderer = \${I18n.translate('Neos.Demo:Main:splide.' + item)}
  }

  _hasItems = \${Type.isArray(this.items) && Array.length(this.items)}
  @if.hasItemsOrContent = \${this._hasItems || this.content}

  renderer = Neos.Fusion:Tag {
    tagName = \${props.tagName}

    attributes {
      x-data = "slider"
      data-splide = \${Json.stringify(Array.concat({i18n:props.i18n}, props.options))}
      aria-label = \${props.label}
      role = \${props.sliderIsDecoration ? 'group' : null}
      class = \${Array.push('splide', props.class)}
      @apply.attributes = \${props.attributes}
    }

    content = afx\`
      <div class="splide__track">
        <ul class="splide__list" @if={props._hasItems && !props.content}>
          <Neos.Fusion:Loop items={props.items}>
            <Neos.Demo:Presentation.Slider.Fragment.Item class={props.slideItemClass} content={item} />
          </Neos.Fusion:Loop>
        </ul>
        <!-- content is used as entry for contentcollections -->
        {props.content}
      </div>
    \`
  }
}
"
`;

exports[`Fusion > TextWithImage 1`] = `
"##
# "Text" element
#
prototype(Neos.Demo:Content.TextWithImage) < prototype(Neos.Neos:ContentComponent) {
  text = Neos.Neos:Editable {
    property = "text"
  }

  src = Neos.Neos:ImageUri {
    @if.hasAsset = \${this.asset}
    asset = \${q(node).property('image')}
    maximumWidth = 500
  }

  alt = \${q(node).property('alternativeText')}
  title = \${q(node).property('title')}
  hasCaption = \${q(node).property('hasCaption')}

  caption = Neos.Neos:Editable {
    property = "caption"
  }

  renderDummyImage = \${renderingMode.isEdit || renderingMode.isPreview}

  renderer = afx\`<Neos.Demo:Presentation.TextWithImage {...props} />\`
}
"
`;
